let p=localStorage.getItem("score");const u=document.querySelector(".score span:last-child"),n=document.querySelector(".choose-attribute"),d=document.querySelector("ul"),g=[...d.querySelectorAll('span[class*="attribute-"]')],c=document.querySelector(".game-results"),o=c.querySelector(".player__choice"),r=c.querySelector(".computer__choice"),i=c.querySelector(".game-results__conclusion p"),L=document.getElementById("play-again"),S=document.getElementById("reset-game"),f=document.querySelector("h1"),h=s=>Math.floor(Math.random()*s.length),y=s=>`<span class="attribute-${s}" data-type="${s}">
      <img src="/icon-${s}.svg" alt="">
    </span>`,v=()=>{n.classList.add("visible"),n.classList.remove("hidden"),c.classList.add("hidden"),c.classList.remove("visible"),o.classList.contains("winner")?o.classList.remove("winner"):o.classList.remove("loser"),r.classList.contains("winner")?r.classList.remove("winner"):r.classList.remove("loser"),i.parentElement.style.opacity="0",d.classList.add("animate"),f.focus()},l=()=>{let s=parseInt(localStorage.getItem("score")),m;o.classList.add("winner"),r.classList.add("loser"),i.textContent="You win",m=s+1,localStorage.setItem("score",`${m}`),setTimeout(()=>{u.innerHTML=localStorage.getItem("score")},1500)},a=()=>{o.classList.add("loser"),r.classList.add("winner"),i.textContent="You lose"};p===null&&(p=localStorage.setItem("score",0));u.innerHTML=localStorage.getItem("score");d.addEventListener("click",s=>{if(!s.target.closest("button"))return;const e=s.target.querySelector("span:last-child").getAttribute("data-type"),t=g[h(g)].getAttribute("data-type");d.classList.remove("animate"),n.classList.remove("visible"),n.classList.add("hidden"),c.classList.remove("hidden"),c.classList.add("visible"),e==="scissors"&&(t==="paper"||t==="lizard")||e==="paper"&&(t==="rock"||t==="spock")||e==="rock"&&(t==="lizard"||t==="scissors")||e==="lizard"&&(t==="spock"||t==="paper")||e==="spock"&&(t==="scissors"||t==="rock")?l():t==="scissors"&&(e==="paper"||e==="lizard")||t==="paper"&&(e==="rock"||e==="spock")||t==="rock"&&(e==="lizard"||e==="scissors")||t==="lizard"&&(e==="spock"||e==="paper")||t==="spock"&&(e==="scissors"||e==="rock")?a():e===t&&(i.textContent="Nobody won"),o.innerHTML=y(e),r.innerHTML=y(t),setTimeout(()=>{o.firstElementChild.style.opacity="1",o.firstElementChild.style.transform="scale(1)"},500),setTimeout(()=>{r.firstElementChild.style.opacity="1",r.firstElementChild.style.transform="scale(1)"},1e3),setTimeout(()=>{i.parentElement.style.opacity="1"},1500)});L.addEventListener("click",v);S.addEventListener("click",()=>{localStorage.setItem("score",0),u.innerHTML=localStorage.getItem("score"),closeModal()});
